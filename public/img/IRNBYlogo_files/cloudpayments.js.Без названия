!function(e){"use strict";function t(e,t,n,o,r,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(o,r)}function n(e){return function(){var n=this,o=arguments;return new Promise((function(r,i){var a=e.apply(n,o);function s(e){t(a,r,i,s,c,"next",e)}function c(e){t(a,r,i,s,c,"throw",e)}s(void 0)}))}}function o(e,t,n){return t=c(t),h(e,u()?Reflect.construct(t,n||[],c(e).constructor):t.apply(e,n))}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,v(o.key),o)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u=function(){return!!e})()}function d(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function m(){var e,t,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",r=n.toStringTag||"@@toStringTag";function i(n,o,r,i){var c=o&&o.prototype instanceof s?o:s,l=Object.create(c.prototype);return y(l,"_invoke",function(n,o,r){var i,s,c,l=0,u=r||[],d=!1,p={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,n){return i=t,s=0,c=e,p.n=n,a}};function f(n,o){for(s=n,c=o,t=0;!d&&l&&!r&&t<u.length;t++){var r,i=u[t],f=p.p,h=i[2];n>3?(r=h===o)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=f&&((r=n<2&&f<i[1])?(s=0,p.v=o,p.n=i[1]):f<h&&(r=n<3||i[0]>o||o>h)&&(i[4]=n,i[5]=o,p.n=h,s=0))}if(r||n>1)return a;throw d=!0,o}return function(r,u,h){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,h),s=u,c=h;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(p.n=-1),f(s,c)):p.n=c:p.v=c);try{if(l=2,i){if(s||(r="next"),t=i[r]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),s=1);i=e}else if((t=(d=p.n<0)?c:n.call(o,p))!==a)break}catch(t){i=e,s=1,c=t}finally{l=1}}return{value:t,done:d}}}(n,r,i),!0),l}var a={};function s(){}function c(){}function l(){}t=Object.getPrototypeOf;var u=[][o]?t(t([][o]())):(y(t={},o,(function(){return this})),t),d=l.prototype=s.prototype=Object.create(u);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,y(e,r,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=l,y(d,"constructor",l),y(l,"constructor",c),c.displayName="GeneratorFunction",y(l,r,"GeneratorFunction"),y(d),y(d,r,"Generator"),y(d,o,(function(){return this})),y(d,"toString",(function(){return"[object Generator]"})),(m=function(){return{w:i,m:p}})()}function y(e,t,n,o){var r=Object.defineProperty;try{r({},"",{})}catch(e){r=0}y=function(e,t,n,o){function i(t,n){y(e,t,(function(e){return this._invoke(t,n,e)}))}t?r?r(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},y(e,t,n,o)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function v(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function w(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})})),t}var b=function(e,t){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},b(e,t)};var S=function(){return S=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},S.apply(this,arguments)};var O=Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]};function I(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function C(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)a.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}function _(e){return this instanceof _?(this.v=e,this):new _(e)}var E=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};var A=Object.freeze({__proto__:null,__extends:function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},get __assign(){return S},__rest:function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n},__decorate:function(e,t,n,o){var r,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(i<3?r(a):i>3?r(t,n,a):r(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},__param:function(e,t){return function(n,o){t(n,o,e)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{c(o.next(e))}catch(e){i(e)}}function s(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((o=o.apply(e,t||[])).next())}))},__generator:function(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},__createBinding:O,__exportStar:function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||O(t,e,n)},__values:I,__read:C,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(C(arguments[t]));return e},__spreadArrays:function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var o=Array(e),r=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,r++)o[r]=i[a];return o},__spreadArray:function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)!o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||t)},__await:_,__asyncGenerator:function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(e,t||[]),i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(e){r[e]&&(o[e]=function(t){return new Promise((function(n,o){i.push([e,t,n,o])>1||s(e,t)}))})}function s(e,t){try{(n=r[e](t)).value instanceof _?Promise.resolve(n.value.v).then(c,l):u(i[0][2],n)}catch(e){u(i[0][3],e)}var n}function c(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}},__asyncDelegator:function(e){var t,n;return t={},o("next"),o("throw",(function(e){throw e})),o("return"),t[Symbol.iterator]=function(){return this},t;function o(o,r){t[o]=e[o]?function(t){return(n=!n)?{value:_(e[o](t)),done:"return"===o}:r?r(t):t}:r}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=I(e),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(n){t[n]=e[n]&&function(t){return new Promise((function(o,r){(function(e,t,n,o){Promise.resolve(o).then((function(t){e({value:t,done:n})}),t)})(o,r,(t=e[n](t)).done,t.value)}))}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&O(t,e,n);return E(t,e),t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet:function(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)},__classPrivateFieldSet:function(e,t,n,o,r){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?r.call(e,n):r?r.value=n:t.set(e,n),n}});const M={SINGLE:"Single",DUAL:"Dual"},R={REQUIRED:"Required",HIDDEN:"Hidden",OPTIONAL:"Optional"},k="ApplePay";function T(e){var t,n,o;if(!e)throw new Error("No intent data");const r=null===(t=e.paymentMethods)||void 0===t?void 0:t.find((function(e){return e.type===k}));if(!r)throw new Error("Missing ApplePay configuration in intent");const i={countryCode:r.countryCode,currencyCode:e.currency,supportedNetworks:r.supportedNetworks,merchantCapabilities:r.merchantCapabilities,total:{label:null!==(n=e.description)&&void 0!==n?n:`Pay to ${e.paymentUrl}`,amount:null===(o=e.amount)||void 0===o?void 0:o.toString()}};return e.emailBehavior===R.REQUIRED&&(i.requiredShippingContactFields=["email"]),i}var D=function(){return a((function e(){r(this,e)}),null,[{key:"currentModel",value:function(){return this.getModel()}},{key:"getModel",value:function(){var e=void 0;if(null==this.iosVer&&(this.iosVer=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1),this.iosVer>=12.2)return j.IPhone_NotDetected;var t=window.devicePixelRatio;if(void 0===this.canvasEl&&(this.canvasEl=document.createElement("canvas")),this.canvasEl){var n=this.canvasEl.getContext("webgl")||this.canvasEl.getContext("experimental-webgl");if(n){var o=n.getExtension("WEBGL_debug_renderer_info");o&&(e=n.getParameter(o.UNMASKED_RENDERER_WEBGL))}}if(896!==window.screen.height||414!==window.screen.width||3!==window.devicePixelRatio&&2!==window.devicePixelRatio)if(812===window.screen.height&&375===window.screen.width)switch(e){default:case"Apple A11 GPU":return j.IPhone_X;case"Apple A12 GPU":return j.IPhone_XS}else if(736===window.screen.height&&414===window.screen.width&&3===window.devicePixelRatio)switch(e){default:case"Apple A8 GPU":return j.IPhone_6_PLUS;case"Apple A9 GPU":return j.IPhone_6S_PLUS;case"Apple A10 GPU":return j.IPhone_7_PLUS;case"Apple A11 GPU":return j.IPhone_8_PLUS}else if(667===window.screen.height&&375===window.screen.width&&3===window.devicePixelRatio)switch(e){default:case"Apple A8 GPU":return j.IPhone_6_PLUS;case"Apple A9 GPU":return j.IPhone_6S_PLUS;case"Apple A10 GPU":return j.IPhone_7_PLUS;case"Apple A11 GPU":return j.IPhone_8_PLUS}else if(667===window.screen.height&&375===window.screen.width&&2===window.devicePixelRatio)switch(e){default:case"Apple A8 GPU":return j.IPhone_6;case"Apple A9 GPU":return j.IPhone_6S;case"Apple A10 GPU":return j.IPhone_7;case"Apple A11 GPU":return j.IPhone_8}else if(window.screen.height/window.screen.width==1.775&&2===window.devicePixelRatio)switch(e){default:case"PowerVR SGX 543":return j.IPhone_5;case"Apple A7 GPU":return j.IPhone_5S;case"Apple A8 GPU":return j.IPhone_6;case"Apple A9 GPU":return j.IPhone_SE;case"Apple A10 GPU":return j.IPhone_7;case"Apple A11 GPU":return j.IPhone_8}else if(window.screen.height/window.screen.width==1.5&&2===window.devicePixelRatio)switch(e){default:case"PowerVR SGX 535":return j.IPhone_4;case"PowerVR SGX 543":return j.IPhone_4S}else{if(window.screen.height/window.screen.width!=1.5||1!==window.devicePixelRatio)return e&&e.match("Apple")&&this.iosVer?j.IPhone:j.Not_IPhone;switch(e){default:case"S5L8900":return j.IPhone;case"ALP0298C05":return j.IPhone_3GS}}else switch(t){default:case 2:return j.IPhone_XR;case 3:return j.IPhone_XS_Max}}}])}();s(D,"iosVer",null);var j=function(e){return e[e.Not_IPhone=0]="Not_IPhone",e[e.IPhone=1]="IPhone",e[e.IPhone_3G=3]="IPhone_3G",e[e.IPhone_3GS=3.1]="IPhone_3GS",e[e.IPhone_4=4]="IPhone_4",e[e.IPhone_4S=4.1]="IPhone_4S",e[e.IPhone_5=5]="IPhone_5",e[e.IPhone_5C=5.1]="IPhone_5C",e[e.IPhone_5S=5.2]="IPhone_5S",e[e.IPhone_SE=6]="IPhone_SE",e[e.IPhone_6=6.1]="IPhone_6",e[e.IPhone_6_PLUS=6.2]="IPhone_6_PLUS",e[e.IPhone_6S=6.3]="IPhone_6S",e[e.IPhone_6S_PLUS=6.4]="IPhone_6S_PLUS",e[e.IPhone_7=7]="IPhone_7",e[e.IPhone_7_PLUS=7.1]="IPhone_7_PLUS",e[e.IPhone_8=8]="IPhone_8",e[e.IPhone_8_PLUS=8.1]="IPhone_8_PLUS",e[e.IPhone_X=10]="IPhone_X",e[e.IPhone_XR=10.1]="IPhone_XR",e[e.IPhone_XS=10.2]="IPhone_XS",e[e.IPhone_XS_Max=10.3]="IPhone_XS_Max",e[e.IPhone_NotDetected=1e6]="IPhone_NotDetected",e}({}),N=function(){return a((function e(){r(this,e),this.iPhoneVersion=D.currentModel()}),[{key:"isAndroid",get:function(){return!!navigator.userAgent.match(/Android/g)}},{key:"isIOs",get:function(){return!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g)}},{key:"isIphone",get:function(){return this.iPhoneVersion!==j.Not_IPhone}},{key:"isIpad",get:function(){return!!navigator.userAgent.match(/iPad/i)}},{key:"isAndroidTablet",get:function(){return!!navigator.userAgent.match(/Tablet/i)||this.isAndroid&&screen.width>=720}},{key:"isTablet",get:function(){return this.isIpad||this.isAndroidTablet}},{key:"isMobile",get:function(){return!!navigator.userAgent.match(/Mobile|Phone/i)}},{key:"isMobileSbpSpecific",get:function(){return this.isMobile||this.isIphone||this.isAndroid||void 0!==P(window.orientation)&&!this.isTablet&&document.documentElement.clientWidth<481}}])}(),x=function(){return a((function e(){r(this,e)}),null,[{key:"isNullOrUndefined",value:function(e){return null==e}},{key:"removeClass",value:function(e,t){for(var n=e.className;-1!==n.indexOf(t);)n=(n=n.replace(t,"")).trim();e.className=n}},{key:"hideHtmlElement",value:function(e){e.style.opacity="0",e.style.display="none"}},{key:"showHtmlElement",value:function(e){e.style.display="",e.style.opacity="1",e.style.zIndex="999999"}},{key:"addClass",value:function(e,t){e.className+=" ".concat(t)}},{key:"loadScript",value:(e=n(m().m((function e(t){var n,o=this,r=arguments;return m().w((function(e){for(;;)if(0===e.n)return n=r.length>1&&void 0!==r[1]?r[1]:document.body,e.a(2,new Promise(function(e,r){var i=this;d(this,o);var a=document.createElement("script");a.type="text/javascript",a.src=t,a.addEventListener("load",function(){return d(this,i),e()}.bind(this),!1),a.addEventListener("error",function(){return d(this,i),r()}.bind(this),!1),n.appendChild(a)}.bind(this)))}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"isIE",value:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE "),n=e.indexOf("Trident/");return t>0||n>0}},{key:"getQueryParameterByName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[[\]]/g,"\\$&");var n=new RegExp("[?&]".concat(e,"(=([^&#]*)|&|#|$)")).exec(t);return n&&n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):null}},{key:"getHostnameFromUrl",value:function(e){var t=e.match(/^https?:\/\/([^/?#]+)(?:[/?#]|$)/i);return t&&t[1]}}]);var e}();function L(e){var t=e.createElement("div");t.id="payment-loading-overlay-63456123",t.style.cssText="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; text-align: center; background-color: transparent; z-index: 9999; display: flex; justify-content: center; align-items: center;";var n=(new DOMParser).parseFromString('<svg width="160" height="160" viewBox="0 0 160 160" fill="none" xmlns="http://www.w3.org/2000/svg" id="payment-loading-overlay-loader-63456123">\n  <path d="M120 80C120 102.091 102.091 120 80 120C57.9086 120 40 102.091 40 80C40 57.9086 57.9086 40 80 40C102.091 40 120 57.9086 120 80ZM46.4 80C46.4 98.5568 61.4432 113.6 80 113.6C98.5568 113.6 113.6 98.5568 113.6 80C113.6 61.4432 98.5568 46.4 80 46.4C61.4432 46.4 46.4 61.4432 46.4 80Z" fill="#E2E8EF"></path>\n  <path d="M116.8 80C118.567 80 120.013 78.565 119.872 76.8033C119.37 70.5458 117.401 64.4781 114.106 59.1001C110.251 52.8102 104.732 47.7088 98.1596 44.3597C91.5868 41.0107 84.2158 39.5445 76.8616 40.1233C69.5075 40.7021 62.4566 43.3033 56.4886 47.6393C50.5206 51.9753 45.8678 57.8773 43.0448 64.6927C40.2218 71.508 39.3385 78.9713 40.4925 86.2574C41.6465 93.5434 44.7929 100.368 49.5838 105.978C53.6802 110.774 58.8424 114.522 64.6386 116.933C66.2704 117.611 68.082 116.68 68.6282 114.999C69.1743 113.318 68.2465 111.527 66.6252 110.823C61.9478 108.794 57.7799 105.72 54.4504 101.821C50.426 97.1095 47.783 91.3765 46.8137 85.2562C45.8443 79.1359 46.5863 72.8667 48.9577 67.1418C51.329 61.4169 55.2373 56.4593 60.2504 52.817C65.2636 49.1748 71.1863 46.9898 77.3638 46.5036C83.5413 46.0174 89.7329 47.249 95.2541 50.0622C100.775 52.8754 105.411 57.1606 108.649 62.444C111.327 66.8153 112.963 71.729 113.448 76.8047C113.616 78.564 115.033 80 116.8 80Z" fill="#2E71FC"></path>\n  </svg>',"image/svg+xml").firstChild,o=e.createElement("span");o.appendChild(n),o.style.cssText="position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);";var r=e.createElement("style");r.type="text/css";r.appendChild(e.createTextNode("@-webkit-keyframes rotating /* Safari and Chrome */ {\n              from {\n                -webkit-transform: rotate(0deg);\n                -o-transform: rotate(0deg);\n                transform: rotate(0deg);\n              }\n              to {\n                -webkit-transform: rotate(360deg);\n                -o-transform: rotate(360deg);\n                transform: rotate(360deg);\n              }\n            }\n            @keyframes rotating {\n              from {\n                -ms-transform: rotate(0deg);\n                -moz-transform: rotate(0deg);\n                -webkit-transform: rotate(0deg);\n                -o-transform: rotate(0deg);\n                transform: rotate(0deg);\n              }\n              to {\n                -ms-transform: rotate(360deg);\n                -moz-transform: rotate(360deg);\n                -webkit-transform: rotate(360deg);\n                -o-transform: rotate(360deg);\n                transform: rotate(360deg);\n              }\n            }\n            #payment-loading-overlay-63456123 #payment-loading-overlay-loader-63456123{\n              -webkit-animation: rotating 2s linear infinite;\n              -moz-animation: rotating 2s linear infinite;\n              -ms-animation: rotating 2s linear infinite;\n              -o-animation: rotating 2s linear infinite;\n              animation: rotating 2s linear infinite;\n            }\n            ")),t.appendChild(r),t.appendChild(o),e.body.appendChild(t)}var U=function(e){return e.Auth="auth",e.Charge="charge",e}({}),B=function(e){return e[e.NToOne=0]="NToOne",e[e.OneToN=1]="OneToN",e}({}),G=function(){return a((function e(t,n,o){var i,a,s=this;if(r(this,e),this.auth="boolean"==typeof n?n:n===U.Auth,this.publicId=t.publicId,this.description=t.description,this.amount=t.amount,this.currency=null===(i=t.currency)||void 0===i?void 0:i.toUpperCase(),t.invoiceId&&(this.invoiceId=String(t.invoiceId)),this.accountId=t.accountId,this.localOrder=t.localOrder,this.cryptogramMode=null!==(a=t.cryptogramMode)&&void 0!==a?a:o,this.email=t.email,this.requireEmail=t.requireEmail,this.disableEmail=t.disableEmail,this.skin=t.skin,this.retryPayment=t.retryPayment,this.payer=t.payer,this.payerServiceFee=t.payerServiceFee,this.escrow=t.escrow,this.autoClose=t.autoClose,this.configuration=t.configuration,this.emailBehavior=t.emailBehavior?t.emailBehavior:this.mapEmailOptionsToEmailBehavior(t.requireEmail,t.disableEmail),this.escrow&&!this.escrow.escrowType&&(this.escrow.escrowType=B.NToOne),null!=t.data)try{this.data=JSON.parse(JSON.stringify(t.data))}catch(e){this.data=t.data}t.infoShopData&&(this.infoShopData=t.infoShopData),Object.keys(this).forEach(function(e){return d(this,s),null==this[e]&&delete this[e]}.bind(this)),e.warnExtraFields(this,t),e.validateOptions(this)}),[{key:"mapEmailOptionsToEmailBehavior",value:function(e,t){return e?R.REQUIRED:t?R.HIDDEN:R.OPTIONAL}}],[{key:"warnExtraFields",value:function(e,t){var n=this;Object.keys(t).forEach(function(t){d(this,n),Object.prototype.hasOwnProperty.call(e,t)||console.warn("Unsupported 'PaymentOptions' field: '".concat(t,"'"))}.bind(this))}},{key:"validateOptions",value:function(e){if(Object.prototype.hasOwnProperty.call(e,"invoiceId")&&void 0!==e.invoiceId&&"string"!=typeof e.invoiceId&&console.warn("Option 'invoiceId' must be a string"),Object.prototype.hasOwnProperty.call(e,"invoiceId")&&void 0!==e.accountId&&"string"!=typeof e.accountId&&console.warn("Option 'accountId' must be a string"),Object.prototype.hasOwnProperty.call(e,"autoClose")){if("number"!=typeof e.autoClose)return delete e.autoClose,void console.warn("Argument 'autoClose' must be a number");e.autoClose<3&&(console.warn("Option 'autoClose' should be equal or greater than 3, but received ".concat(e.autoClose,". Rewritten to 3.")),e.autoClose=3),e.autoClose>10&&(console.warn("Option autoClose' should be equal or lower than 10, but received ".concat(e.autoClose,". Rewritten to 10.")),e.autoClose=10)}}}])}();let F,Y,W,V,K;!function(e){e.Call="call",e.Reply="reply",e.Syn="syn",e.SynAck="synAck",e.Ack="ack"}(F||(F={})),function(e){e.Fulfilled="fulfilled",e.Rejected="rejected"}(Y||(Y={})),function(e){e.ConnectionDestroyed="ConnectionDestroyed",e.ConnectionTimeout="ConnectionTimeout",e.NoIframeSrc="NoIframeSrc"}(W||(W={})),function(e){e.DataCloneError="DataCloneError"}(V||(V={})),function(e){e.Message="message"}(K||(K={}));const H={"http:":"80","https:":"443"},q=/^(https?:)?\/\/([^/:]+)?(:(\d+))?/,z=["file:","data:"];const $=function({name:e,message:t,stack:n}){return{name:e,message:t,stack:n}};let X=0;var Z=function(){return++X};const J=function(e){return e?e.split("."):[]},Q=function(e,t,n){const o=J(t);return o.reduce((function(e,t,r){return void 0===e[t]&&(e[t]={}),r===o.length-1&&(e[t]=n),e[t]}),e),e},ee=function(e,t){const n={};return Object.keys(e).forEach((function(o){const r=e[o],i=function(e,t){const n=J(t||"");return n.push(e),function(e){return e.join(".")}(n)}(o,t);"object"==typeof r&&Object.assign(n,ee(r,i)),"function"==typeof r&&(n[i]=r)})),n};var te=function(e,t,n,o,r){const{localName:i,local:a,remote:s,originForSending:c,originForReceiving:l}=t;let u=!1;r(`${i}: Connecting call sender`);const d=function(e){return function(...t){let n;r(`${i}: Sending ${e}() call`);try{s.closed&&(n=!0)}catch(e){n=!0}if(n&&o(),u){const t=new Error(`Unable to send ${e}() call due to destroyed connection`);throw t.code=W.ConnectionDestroyed,t}return new Promise((function(n,o){const u=Z(),d=function(t){if(t.source!==s||t.data.penpal!==F.Reply||t.data.id!==u)return;if("*"!==l&&t.origin!==l)return void r(`${i} received message from origin ${t.origin} which did not match expected origin ${l}`);const c=t.data;r(`${i}: Received ${e}() reply`),a.removeEventListener(K.Message,d);let p=c.returnValue;c.returnValueIsError&&(p=function(e){const t=new Error;return Object.keys(e).forEach((function(n){return t[n]=e[n]})),t}(p)),(c.resolution===Y.Fulfilled?n:o)(p)};a.addEventListener(K.Message,d);const p={penpal:F.Call,id:u,methodName:e,args:t};s.postMessage(p,c)}))}},p=n.reduce((function(e,t){return e[t]=d(t),e}),{});return Object.assign(e,function(e){const t={};for(const n in e)Q(t,n,e[n]);return t}(p)),function(){u=!0}},ne=function(e,t,n,o,r){const{destroy:i,onDestroy:a}=o;let s,c;const l={};return function(o){if("*"!==t&&o.origin!==t)return void r(`Parent: Handshake - Received ACK message from origin ${o.origin} which did not match expected origin ${t}`);r("Parent: Handshake - Received ACK");const u={localName:"Parent",local:window,remote:o.source,originForSending:n,originForReceiving:t};s&&s(),s=function(e,t,n){const{localName:o,local:r,remote:i,originForSending:a,originForReceiving:s}=e;let c=!1;const l=function(e){if(e.source!==i||e.data.penpal!==F.Call)return;if("*"!==s&&e.origin!==s)return void n(`${o} received message from origin ${e.origin} which did not match expected origin ${s}`);const r=e.data,{methodName:l,args:u,id:d}=r;n(`${o}: Received ${l}() call`);const p=function(e){return function(t){if(n(`${o}: Sending ${l}() reply`),c)return void n(`${o}: Unable to send ${l}() reply due to destroyed connection`);const r={penpal:F.Reply,id:d,resolution:e,returnValue:t};e===Y.Rejected&&t instanceof Error&&(r.returnValue=$(t),r.returnValueIsError=!0);try{i.postMessage(r,a)}catch(e){if(e.name===V.DataCloneError){const t={penpal:F.Reply,id:d,resolution:Y.Rejected,returnValue:$(e),returnValueIsError:!0};i.postMessage(t,a)}throw e}}};new Promise((function(e){return e(t[l].apply(t,u))})).then(p(Y.Fulfilled),p(Y.Rejected))};return r.addEventListener(K.Message,l),function(){c=!0,r.removeEventListener(K.Message,l)}}(u,e,r),a(s),c&&c.forEach((function(e){delete l[e]})),c=o.data.methodNames;const d=te(l,u,c,i,r);return a(d),l}};var oe=function(e){let{iframe:t,methods:n={},childOrigin:o,timeout:r,debug:i=!1}=e;const a=function(e){return function(...t){e&&console.log("[Penpal]",...t)}}(i),s=function(e,t){const n=[];let o=!1;return{destroy(r){o||(o=!0,t(`${e}: Destroying connection`),n.forEach((function(e){e(r)})))},onDestroy(e){o?e():n.push(e)}}}("Parent",a),{onDestroy:c,destroy:l}=s;o||(!function(e){if(!e.src&&!e.srcdoc){const e=new Error("Iframe must have src or srcdoc property defined.");throw e.code=W.NoIframeSrc,e}}(t),o=function(e){if(e&&z.find((function(t){return e.startsWith(t)})))return"null";const t=document.location,n=q.exec(e);let o,r,i;return n?(o=n[1]?n[1]:t.protocol,r=n[2],i=n[4]):(o=t.protocol,r=t.hostname,i=t.port),`${o}//${r}${i&&i!==H[o]?`:${i}`:""}`}(t.src));const u="null"===o?"*":o,d=ee(n),p=function(e,t,n,o){return function(r){if("*"!==n&&r.origin!==n)return void e(`Parent: Handshake - Received SYN message from origin ${r.origin} which did not match expected origin ${n}`);e("Parent: Handshake - Received SYN, responding with SYN-ACK");const i={penpal:F.SynAck,methodNames:Object.keys(t)};r.source.postMessage(i,o)}}(a,d,o,u),f=ne(d,o,u,s,a),h=new Promise((function(e,n){const o=function(e,t){let n;return void 0!==e&&(n=window.setTimeout((function(){const n=new Error(`Connection timed out after ${e}ms`);n.code=W.ConnectionTimeout,t(n)}),e)),function(){clearTimeout(n)}}(r,l),i=function(n){if(n.source===t.contentWindow&&n.data)if(n.data.penpal!==F.Syn)if(n.data.penpal!==F.Ack);else{const t=f(n);t&&(o(),e(t))}else p(n)};window.addEventListener(K.Message,i),a("Parent: Awaiting handshake"),function(e,t){const{destroy:n,onDestroy:o}=t,r=setInterval((function(){e.isConnected||(clearInterval(r),n())}),6e4);o((function(){clearInterval(r)}))}(t,s),c((function(e){window.removeEventListener(K.Message,i),e&&n(e)}))}));return{promise:h,destroy(){l()}}},re=function(e){return e.Payment="payment",e.Installment="installment",e.Error="error",e.Cancel="cancel",e.Cryptogram="cryptogram",e.Sbp="sbp",e.Tinkoff="tinkoff",e.Spei="spei",e.ForeignCard="foreignCard",e.SberPay="sberPay",e.InstallmentKz="installmentKz",e}({}),ie=function(e){return e.Success="success",e.Appointment="appointment",e.Fail="fail",e.Reject="reject",e.Cancel="cancel",e.Wait="wait",e}({});var ae=!1;if("undefined"!=typeof window){var se={get passive(){ae=!0}};window.addEventListener("testPassive",null,se),window.removeEventListener("testPassive",null,se)}var ce="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),le=[],ue=!1,de=-1,pe=void 0,fe=void 0,he=function(e){return le.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},me=function(e){var t=e||window.event;return!!he(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},ye=function(e,t){if(e){if(!le.some((function(t){return t.targetElement===e}))){var n={targetElement:e,options:t||{}};le=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(le),[n]),ce?(e.ontouchstart=function(e){1===e.targetTouches.length&&(de=e.targetTouches[0].clientY)},e.ontouchmove=function(t){1===t.targetTouches.length&&function(e,t){var n=e.targetTouches[0].clientY-de;!he(e.target)&&(t&&0===t.scrollTop&&n>0||function(e){return!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight}(t)&&n<0?me(e):e.stopPropagation())}(t,e)},ue||(document.addEventListener("touchmove",me,ae?{passive:!1}:void 0),ue=!0)):function(e){if(void 0===fe){var t=!!e&&!0===e.reserveScrollBarGap,n=window.innerWidth-document.documentElement.clientWidth;t&&n>0&&(fe=document.body.style.paddingRight,document.body.style.paddingRight=n+"px")}void 0===pe&&(pe=document.body.style.overflow,document.body.style.overflow="hidden")}(t)}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")},ge=function(e){e?(le=le.filter((function(t){return t.targetElement!==e})),ce?(e.ontouchstart=null,e.ontouchmove=null,ue&&0===le.length&&(document.removeEventListener("touchmove",me,ae?{passive:!1}:void 0),ue=!1)):le.length||(void 0!==fe&&(document.body.style.paddingRight=fe,fe=void 0),void 0!==pe&&(document.body.style.overflow=pe,pe=void 0))):console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.")},ve={},Pe=w(A),we={},be={},Se={},Oe={};Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.getHostnameFromUrl=void 0,Oe.getHostnameFromUrl=function(e){const t=e.match(/^https?:\/\/([^/?#]+)(?:[/?#]|$)/i);return t&&t[1]};var Ie={},Ce={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PutApiIntentMirpayByIntentIdPayResponseTransformer=e.PostApiIntentPayResponseTransformer=e.PayDtoModelResponseTransformer=e.PostApiIntentResponseTransformer=e.GetApiIntentByorderByPublicOrderIdResponseTransformer=e.PatchApiIntentByIdResponseTransformer=e.GetApiIntentByIdResponseTransformer=e.CreateIntentDtoModelResponseTransformer=e.AdditionalTransactionInfoModelResponseTransformer=e.RecurrentDtoModelResponseTransformer=e.Subscription=e.Scenario=e.SaveCard=e.RecurrentInterval=e.PaymentMethod=e.PaymentFormType=e.IntentType=e.IntentStatus=e.Environment=e.EmailBehavior=e.CurrencyCode=e.CardType=e.CardTransactionStatus=e.CardTransactionMessageScheme=void 0;const t=Pe;e.CardTransactionMessageScheme={SINGLE:"Single",DUAL:"Dual"},e.CardTransactionStatus={CREATED:"Created",AWAITING_AUTHENTICATION:"AwaitingAuthentication",AUTHORIZED:"Authorized",COMPLETED:"Completed",CANCELLED:"Cancelled",DECLINED:"Declined",PENDING:"Pending"},e.CardType={VISA:"Visa",MASTER_CARD:"MasterCard",MAESTRO:"Maestro",AMERICAN_EXPRESS:"AmericanExpress",DINERS_CLUB:"DinersClub",DISCOVER:"Discover",CARTE_BLANCHE:"CarteBlanche",EN_ROUTE:"EnRoute",JCB:"JCB",PRO100:"PRO100",MIR:"MIR",BELCARD:"Belcard",TROY:"Troy",UNION_PAY:"UnionPay",ELCARD:"Elcard",HUMO:"Humo",UZCARD:"Uzcard",CARNET:"Carnet",UNKNOWN:"Unknown"},e.CurrencyCode={RUB:"RUB",USD:"USD",EUR:"EUR",GBP:"GBP",KZT:"KZT",BYR:"BYR",UAH:"UAH",CHF:"CHF",AZN:"AZN",CZK:"CZK",CAD:"CAD",PLN:"PLN",SEK:"SEK",TRY:"TRY",CNY:"CNY",BYN:"BYN",INR:"INR",BRL:"BRL",ZAR:"ZAR",UZS:"UZS",RON:"RON",AUD:"AUD",HKD:"HKD",BGN:"BGN",GEL:"GEL",KGS:"KGS",AMD:"AMD",AED:"AED",RSD:"RSD",JPY:"JPY",NZD:"NZD",KRW:"KRW",SGD:"SGD",NOK:"NOK",MXN:"MXN",TWD:"TWD",DKK:"DKK",THB:"THB",IDR:"IDR",HUF:"HUF",ILS:"ILS",CLP:"CLP",PHP:"PHP",COP:"COP",SAR:"SAR",MYR:"MYR",ALL:"ALL",HRK:"HRK",LTL:"LTL",MDL:"MDL",BAM:"BAM",MKD:"MKD",GIP:"GIP",ISK:"ISK",BHD:"BHD",IQD:"IQD",JOD:"JOD",KWD:"KWD",LBP:"LBP",PKR:"PKR",SYP:"SYP",TMT:"TMT",IRR:"IRR",OMR:"OMR",QAR:"QAR",TJS:"TJS",YER:"YER",BND:"BND",KHR:"KHR",LKR:"LKR",MNT:"MNT",MVR:"MVR",NPR:"NPR",PGK:"PGK",SBD:"SBD",VUV:"VUV",XPF:"XPF",BDT:"BDT",BTN:"BTN",FJD:"FJD",KPW:"KPW",LAK:"LAK",MMK:"MMK",MOP:"MOP",TOP:"TOP",VND:"VND",WST:"WST",ANG:"ANG",BSD:"BSD",BMD:"BMD",DOP:"DOP",JMD:"JMD",TTD:"TTD",XCD:"XCD",AWG:"AWG",BBD:"BBD",HTG:"HTG",KYD:"KYD",ARS:"ARS",CRC:"CRC",FKP:"FKP",GYD:"GYD",PAB:"PAB",PYG:"PYG",SVC:"SVC",VES:"VES",BOB:"BOB",BZD:"BZD",GTQ:"GTQ",HNL:"HNL",NIO:"NIO",PEN:"PEN",SRD:"SRD",UYU:"UYU",AOA:"AOA",BWP:"BWP",CVE:"CVE",DZD:"DZD",ETB:"ETB",GMD:"GMD",KES:"KES",LRD:"LRD",LYD:"LYD",MGA:"MGA",MUR:"MUR",MZN:"MZN",NGN:"NGN",SCR:"SCR",SHP:"SHP",SOS:"SOS",SZL:"SZL",TZS:"TZS",XAF:"XAF",BIF:"BIF",CDF:"CDF",DJF:"DJF",EGP:"EGP",GHS:"GHS",GNF:"GNF",KMF:"KMF",LSL:"LSL",MAD:"MAD",MRU:"MRU",MWK:"MWK",NAD:"NAD",RWF:"RWF",SDG:"SDG",SLL:"SLL",STN:"STN",TND:"TND",UGX:"UGX",XOF:"XOF",ZMW:"ZMW"},e.EmailBehavior={REQUIRED:"Required",HIDDEN:"Hidden",OPTIONAL:"Optional"},e.Environment={PRODUCTION:"PRODUCTION",TEST:"TEST"},e.IntentStatus={REQUIRES_PAYMENT_DATA:"RequiresPaymentData",REQUIRES_PAYMENT_METHOD:"RequiresPaymentMethod",REQUIRES_ACTION:"RequiresAction",PROCESSING:"Processing",CANCELLED:"Cancelled",SUCCEEDED:"Succeeded"},e.IntentType={DEFAULT:"Default",ORDER:"Order",PAYMENT_FORM:"PaymentForm"},e.PaymentFormType={CHARITY:"Charity",BUSINESS:"Business"},e.PaymentMethod={APPLE_PAY:"ApplePay",GOOGLE_PAY:"GooglePay",YANDEX_PAY:"YandexPay",TCS_INSTALLMENT:"TcsInstallment",SBP:"Sbp",TINKOFF_PAY:"TinkoffPay",MIR_PAY:"MirPay",SPEI:"Spei",DOLYAME:"Dolyame",MTS_PAY:"MtsPay",FOREIGN_CARD:"ForeignCard",SBER_PAY:"SberPay",INSTALLMENT_KZ:"InstallmentKz",CARD:"Card",TOKEN:"Token"},e.RecurrentInterval={WEEK:"Week",MONTH:"Month",DAY:"Day"},e.SaveCard={CLASSIC:"Classic",NEW:"New",OPTIONAL:"Optional",FORCE:"Force"},e.Scenario={UNKNOWN:"Unknown",CRYPTOGRAM:"Cryptogram",TOKEN:"Token",WIDGET:"Widget",ORDERS:"Orders",CUSTOM:"Custom",SUBSCRIPTIONS:"Subscriptions",MOBILE_SDK:"MobileSdk",QR_LINK:"QrLink",QR_IMAGE:"QrImage",WEB_SDK:"WebSdk",BLOCKS:"Blocks",INFO_SHOP:"InfoShop",DEAL_PAYOUT:"DealPayout"},e.Subscription={DISABLED:"Disabled",WEEKLY:"Weekly",MONTHLY:"Monthly"};e.RecurrentDtoModelResponseTransformer=function(e){return(null==e?void 0:e.startDate)&&(e.startDate=new Date(e.startDate)),e};e.AdditionalTransactionInfoModelResponseTransformer=function(e){return(null==e?void 0:e.authDate)&&(e.authDate=new Date(e.authDate)),e};e.CreateIntentDtoModelResponseTransformer=function(t){return(null==t?void 0:t.createdDate)&&(t.createdDate=new Date(t.createdDate)),(null==t?void 0:t.updatedDate)&&(t.updatedDate=new Date(t.updatedDate)),(null==t?void 0:t.recurrent)&&(0,e.RecurrentDtoModelResponseTransformer)(t.recurrent),(null==t?void 0:t.additionalTransactionInfo)&&(0,e.AdditionalTransactionInfoModelResponseTransformer)(t.additionalTransactionInfo),t};e.GetApiIntentByIdResponseTransformer=function(n){return t.__awaiter(void 0,void 0,void 0,(function*(){return(0,e.CreateIntentDtoModelResponseTransformer)(n),n}))};e.PatchApiIntentByIdResponseTransformer=function(n){return t.__awaiter(void 0,void 0,void 0,(function*(){return(0,e.CreateIntentDtoModelResponseTransformer)(n),n}))};e.GetApiIntentByorderByPublicOrderIdResponseTransformer=function(n){return t.__awaiter(void 0,void 0,void 0,(function*(){return(0,e.CreateIntentDtoModelResponseTransformer)(n),n}))};e.PostApiIntentResponseTransformer=function(n){return t.__awaiter(void 0,void 0,void 0,(function*(){return(0,e.CreateIntentDtoModelResponseTransformer)(n),n}))};e.PayDtoModelResponseTransformer=function(t){return(null==t?void 0:t.additionalTransactionInfo)&&(0,e.AdditionalTransactionInfoModelResponseTransformer)(t.additionalTransactionInfo),t};e.PostApiIntentPayResponseTransformer=function(n){return t.__awaiter(void 0,void 0,void 0,(function*(){return(0,e.PayDtoModelResponseTransformer)(n),n}))};e.PutApiIntentMirpayByIntentIdPayResponseTransformer=function(n){return t.__awaiter(void 0,void 0,void 0,(function*(){return(0,e.PayDtoModelResponseTransformer)(n),n}))}}(Ce),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EmailBehavior=e.CardType=e.SaveCard=e.CardTransactionStatus=e.Scenario=e.IntentType=e.IntentStatus=e.IntentPaymentMethod=e.PaymentScheme=void 0;var t=Ce;Object.defineProperty(e,"PaymentScheme",{enumerable:!0,get:function(){return t.CardTransactionMessageScheme}}),Object.defineProperty(e,"IntentPaymentMethod",{enumerable:!0,get:function(){return t.PaymentMethod}}),Object.defineProperty(e,"IntentStatus",{enumerable:!0,get:function(){return t.IntentStatus}}),Object.defineProperty(e,"IntentType",{enumerable:!0,get:function(){return t.IntentType}}),Object.defineProperty(e,"Scenario",{enumerable:!0,get:function(){return t.Scenario}}),Object.defineProperty(e,"CardTransactionStatus",{enumerable:!0,get:function(){return t.CardTransactionStatus}}),Object.defineProperty(e,"SaveCard",{enumerable:!0,get:function(){return t.SaveCard}}),Object.defineProperty(e,"CardType",{enumerable:!0,get:function(){return t.CardType}}),Object.defineProperty(e,"EmailBehavior",{enumerable:!0,get:function(){return t.EmailBehavior}})}(Ie);var _e={};Object.defineProperty(_e,"__esModule",{value:!0}),_e.PaymentInstanceBase=void 0;_e.PaymentInstanceBase=class{constructor(e){this.instance=e}getInstance(){return this.instance}};var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0}),Ee.startApplePaySession=void 0;const Ae=Pe;Ee.startApplePaySession=function(e,t){return Ae.__awaiter(this,void 0,void 0,(function*(){const n=yield fetch(e,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to start apple pay session: ${n.statusText}`);return yield n.json()}))},Object.defineProperty(Se,"__esModule",{value:!0}),Se.getApplePayCryptogram=void 0;const Me=Oe,Re=Ie,ke=_e,Te=Ee,De=Symbol("ApplePayPaymentInstanceKey");Se.getApplePayCryptogram=function(e,t,n){return new Promise((function(o,r){try{const i=e.getPaymentMethod(Re.IntentPaymentMethod.APPLE_PAY);if(!i)return void r("No ApplePay config in PaymentIntent");const a=t(e);a.oncancel.then((function(t){console.log("getApplePayCryptogram => wrappedSession.oncancel.then => data",t),e.removePaymentInstance(De),r(t)})).catch((function(t){console.log("getApplePayCryptogram => wrappedSession.oncancel.catch => error",t),e.removePaymentInstance(De),r(t)})),a.onvalidatemerchant.then((function(t){if(e.rawValue)return(0,Te.startApplePaySession)(null==i?void 0:i.startSessionUrl,{ValidationUrl:t,TerminalPublicId:e.rawValue.publicTerminalId,SharedAppleMerchantIdUrl:(0,Me.getHostnameFromUrl)(n||window.location.href)});r("No intent data")})).catch(r).then((function(e){return console.log("getApplePayCryptogram validationResult",e),e.model})).catch((function(e){console.log("getApplePayCryptogram error",e),r()})).then(a.completeMerchantValidation).catch((function(e){console.log("getApplePayCryptogram error",e),r()})),a.onpaymentauthorized.then(o).catch(r),e.addPaymentInstance(De,new je(a)),a.begin()}catch(e){console.log("I rejected!!"),r("I rejected!!!")}}))};class je extends ke.PaymentInstanceBase{onBeforeIntentUpdate(){}onIntentUpdated(){}onIntentStatusUpdated(){}ontIntentPayComplete(e,t){t===Re.IntentPaymentMethod.APPLE_PAY&&this.instance.completePayment(e?ApplePaySession.STATUS_SUCCESS:ApplePaySession.STATUS_FAILURE)}}var Ne={},xe={},Le={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});var Be={};Object.defineProperty(Be,"__esModule",{value:!0}),function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Pe;t.__exportStar(Ie,e),t.__exportStar(Ue,e),t.__exportStar(Be,e)}(Le),Object.defineProperty(xe,"__esModule",{value:!0}),xe.createApplePaymentRequest=void 0;const Ge=Le,Fe=Ie;xe.createApplePaymentRequest=function(e){var t,n,o;if(!e)throw new Error("No intent data");const r=null===(t=e.paymentMethods)||void 0===t?void 0:t.find((function(e){return e.type===Ge.IntentPaymentMethod.APPLE_PAY}));if(!r)throw new Error("Missing ApplePay configuration in intent");const i={countryCode:r.countryCode,currencyCode:e.currency,supportedNetworks:r.supportedNetworks,merchantCapabilities:r.merchantCapabilities,total:{label:null!==(n=e.description)&&void 0!==n?n:`Pay to ${e.paymentUrl}`,amount:null===(o=e.amount)||void 0===o?void 0:o.toString()}};return e.emailBehavior===Fe.EmailBehavior.REQUIRED&&(i.requiredShippingContactFields=["email"]),i},Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.createApplePaySessionWrapper=void 0;const Ye=xe;Ne.createApplePaySessionWrapper=function(e){return console.log("createApplePaySessionWrapper start",e),new We(e)};class We{get oncancel(){return this.onCancel}get onvalidatemerchant(){return this.onValidateMerchant}get onpaymentauthorized(){return this.onPaymentAuthorized}constructor(e){var t=this;console.log("ApplePaySessionWrapper constructor common start");const n=(0,Ye.createApplePaymentRequest)(e.rawValue);console.log("ApplePaySessionWrapper constructor common applePaymentRequest",n),this.session=new ApplePaySession(1,n),this.onCancel=new Promise((function(e){console.log("ApplePaySessionWrapper constructor common this.onCancel start"),t.session.oncancel=function(t){console.log("ApplePaySessionWrapper constructor common this.onCancel event",t),e(t)}})),this.onPaymentAuthorized=new Promise((function(e,n){console.log("ApplePaySessionWrapper constructor common this.onPaymentAuthorized start"),t.session.onpaymentauthorized=function(t){console.log("ApplePaySessionWrapper constructor common this.onPaymentAuthorized event",t),e(JSON.stringify(t.payment.token))},t.onCancel.then(n)})),this.onValidateMerchant=new Promise((function(e,n){console.log("ApplePaySessionWrapper constructor common this.onValidateMerchant start"),t.session.onvalidatemerchant=function(t){console.log("ApplePaySessionWrapper constructor common this.onValidateMerchant event",t),e(t.validationURL)},t.onCancel.then(n)}))}begin(){return console.log("ApplePaySessionWrapper common begin start",this.session),this.session.begin(),Promise.resolve()}completeMerchantValidation(e){return console.log("ApplePaySessionWrapper common completeMerchantValidation start",this.session),this.session.completeMerchantValidation(e),Promise.resolve()}completePayment(e){return console.log("ApplePaySessionWrapper common completePayment start",this.session),this.session.completePayment(e),Promise.resolve()}}var Ve={};Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.isApplePayAvailable=void 0,Ve.isApplePayAvailable=function(){return"ApplePaySession"in window&&ApplePaySession.canMakePayments()},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isApplePayAvailable=e.createApplePaymentRequest=e.startApplePaySession=e.createApplePaySessionWrapper=e.getApplePayCryptogram=void 0;var t=Se;Object.defineProperty(e,"getApplePayCryptogram",{enumerable:!0,get:function(){return t.getApplePayCryptogram}});var n=Ne;Object.defineProperty(e,"createApplePaySessionWrapper",{enumerable:!0,get:function(){return n.createApplePaySessionWrapper}});var o=Ee;Object.defineProperty(e,"startApplePaySession",{enumerable:!0,get:function(){return o.startApplePaySession}});var r=xe;Object.defineProperty(e,"createApplePaymentRequest",{enumerable:!0,get:function(){return r.createApplePaymentRequest}});var i=Ve;Object.defineProperty(e,"isApplePayAvailable",{enumerable:!0,get:function(){return i.isApplePayAvailable}})}(be);var Ke={},He={};Object.defineProperty(He,"__esModule",{value:!0}),He.getDolyameLink=void 0;const qe=Ie;He.getDolyameLink=function(e){const t=e.getPaymentMethod(qe.IntentPaymentMethod.DOLYAME);if(!t)throw new Error("No Dolyame config in PaymentIntent");return t.link},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getDolyameLink=void 0;var t=He;Object.defineProperty(e,"getDolyameLink",{enumerable:!0,get:function(){return t.getDolyameLink}})}(Ke);var ze={},$e={},Xe={},Ze={};Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.loadScript=void 0,Ze.loadScript=function(e,t=document.body){const n=document.createElement("script");return n.type="text/javascript",n.src=e,new Promise((function(e,o){const r=function(){e(),n.removeEventListener("load",r)},i=function(){n.removeEventListener("error",i),n.remove(),o()};n.addEventListener("load",r,!1),n.addEventListener("error",i,!1),t.appendChild(n)}))},Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.getPaymentsClient=void 0;const Je=Pe,Qe=Ze,et=Ie;let tt=null;Xe.getPaymentsClient=function(e,t=!1){return Je.__awaiter(this,void 0,void 0,(function*(){if(null!=tt&&!t)return Promise.resolve(tt);if(!e.rawValue)return Promise.reject(new Error("No intent data"));yield(0,Qe.loadScript)("https://pay.google.com/gp/p/js/pay.js");const n=e.getPaymentMethod(et.IntentPaymentMethod.GOOGLE_PAY);return tt=new google.payments.api.PaymentsClient({environment:null==n?void 0:n.env}),tt}))};var nt={};Object.defineProperty(nt,"__esModule",{value:!0}),nt.getBasePaymentRequest=nt.createGooglePaymentRequest=void 0;const ot=Le,rt=Ie;nt.createGooglePaymentRequest=function(e){var t,n;const o=e.getPaymentMethod(ot.IntentPaymentMethod.GOOGLE_PAY);if(!o)throw new Error("No GooglePay config in PaymentIntent.");if(!e.rawValue)throw new Error("No intent data");return{apiVersion:2,apiVersionMinor:0,allowedPaymentMethods:[{type:"CARD",parameters:{allowedAuthMethods:o.allowedAuthMethods,allowedCardNetworks:o.allowedCardNetworks},tokenizationSpecification:{type:"PAYMENT_GATEWAY",parameters:{gateway:o.gateway,gatewayMerchantId:null===(t=e.rawValue)||void 0===t?void 0:t.publicTerminalId}}}],transactionInfo:{currencyCode:null===(n=e.rawValue)||void 0===n?void 0:n.currency,totalPriceStatus:"FINAL",totalPrice:e.rawValue.amount.toString()},merchantInfo:{merchantId:o.merchantId,merchantName:o.merchantName},emailRequired:e.rawValue.emailBehavior===rt.EmailBehavior.REQUIRED}},nt.getBasePaymentRequest=function(){return{apiVersion:2,apiVersionMinor:0}},Object.defineProperty($e,"__esModule",{value:!0}),$e.getGooglePayCryptogram=void 0;const it=Pe,at=Ie,st=Xe,ct=nt;$e.getGooglePayCryptogram=function(e){return it.__awaiter(this,void 0,void 0,(function*(){if(!e.getPaymentMethod(at.IntentPaymentMethod.GOOGLE_PAY))throw new Error("No GooglePay config in PaymentIntent.");const t=(0,ct.createGooglePaymentRequest)(e),n=yield(0,st.getPaymentsClient)(e);return yield n.loadPaymentData(t)}))},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getGooglePayCryptogram=void 0;var t=$e;Object.defineProperty(e,"getGooglePayCryptogram",{enumerable:!0,get:function(){return t.getGooglePayCryptogram}})}(ze);var lt={},ut={};Object.defineProperty(ut,"__esModule",{value:!0}),ut.payByMirPay=void 0;const dt=Ie;ut.payByMirPay=function(e,t){if(!e.getPaymentMethod(dt.IntentPaymentMethod.MIR_PAY))return;const n=e.getPaymentMethod(dt.IntentPaymentMethod.MIR_PAY);if(!n)throw new Error("No MirPay config in PaymentIntent");t?t(n.deepLink):window.open(n.deepLink)};var pt={},ft={};Object.defineProperty(ft,"__esModule",{value:!0}),ft.isAndroid=void 0,ft.isAndroid=function(){return!!navigator.userAgent.match(/Android/g)},Object.defineProperty(pt,"__esModule",{value:!0}),pt.isMirPayAvailiable=void 0;const ht=ft;pt.isMirPayAvailiable=function(){return(0,ht.isAndroid)()},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isMirPayAvailiable=e.payByMirPay=void 0;var t=ut;Object.defineProperty(e,"payByMirPay",{enumerable:!0,get:function(){return t.payByMirPay}});var n=pt;Object.defineProperty(e,"isMirPayAvailiable",{enumerable:!0,get:function(){return n.isMirPayAvailiable}})}(lt);var mt={},yt={};Object.defineProperty(yt,"__esModule",{value:!0}),yt.getSbpLink=void 0;const gt=Ie;yt.getSbpLink=function(e){const t=e.getPaymentMethod(gt.IntentPaymentMethod.SBP);if(!t)throw new Error("No SBP config in PaymentIntent");return t.link};var vt={};Object.defineProperty(vt,"__esModule",{value:!0}),vt.getSbpImage=void 0;const Pt=Ie;vt.getSbpImage=function(e){const t=e.getPaymentMethod(Pt.IntentPaymentMethod.SBP);if(!t)throw new Error("No SBP config in PaymentIntent");return t.image};var wt={};Object.defineProperty(wt,"__esModule",{value:!0}),wt.getSbpBanks=void 0;const bt=Ie;wt.getSbpBanks=function(e){const t=e.getPaymentMethod(bt.IntentPaymentMethod.SBP);if(!t)throw new Error("No SBP config in PaymentIntent");return t.banks};var St={};Object.defineProperty(St,"__esModule",{value:!0}),St.getLinkForBank=void 0,St.getLinkForBank=function(e,t){const n=new URL(e);return n.searchParams.append("bankSchema",t),n.toString()};var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.openLinkWithBank=void 0,Ot.openLinkWithBank=function(e,t){const n=new URL(e);return n.searchParams.append("bankSchema",t),window.open(n.toString())},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.openLinkWithBank=e.getLinkForBank=e.getSbpBanks=e.getSbpImage=e.getSbpLink=void 0;var t=yt;Object.defineProperty(e,"getSbpLink",{enumerable:!0,get:function(){return t.getSbpLink}});var n=vt;Object.defineProperty(e,"getSbpImage",{enumerable:!0,get:function(){return n.getSbpImage}});var o=wt;Object.defineProperty(e,"getSbpBanks",{enumerable:!0,get:function(){return o.getSbpBanks}});var r=St;Object.defineProperty(e,"getLinkForBank",{enumerable:!0,get:function(){return r.getLinkForBank}});var i=Ot;Object.defineProperty(e,"openLinkWithBank",{enumerable:!0,get:function(){return i.openLinkWithBank}})}(mt);var It={},Ct={};Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.getForeignCardLink=void 0;const _t=Ie;Ct.getForeignCardLink=function(e){const t=e.getPaymentMethod(_t.IntentPaymentMethod.FOREIGN_CARD);if(!t)throw new Error("No Foreign Card config in PaymentIntent");return t.link},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getForeignCardLink=void 0;var t=Ct;Object.defineProperty(e,"getForeignCardLink",{enumerable:!0,get:function(){return t.getForeignCardLink}})}(It);var Et={},At={};Object.defineProperty(At,"__esModule",{value:!0}),At.getSpeiData=void 0;const Mt=Pe,Rt=Ie;At.getSpeiData=function(e){return Mt.__awaiter(this,void 0,void 0,(function*(){const t=e.getPaymentMethod(Rt.IntentPaymentMethod.SPEI);if(!t)throw new Error("No SPEI config in PaymentIntent");return fetch(t.data,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()}))}))},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getSpeiData=void 0;var t=At;Object.defineProperty(e,"getSpeiData",{enumerable:!0,get:function(){return t.getSpeiData}})}(Et);var kt={},Tt={};Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.getTinkoffInstallmentLink=void 0;const Dt=Le;Tt.getTinkoffInstallmentLink=function(e,t){const n=e.getPaymentMethod(Dt.IntentPaymentMethod.TCS_INSTALLMENT);if(!n)throw new Error(`No ${Dt.IntentPaymentMethod.TCS_INSTALLMENT} config in PaymentIntent`);const o=new URL(n.link);return o.searchParams.append("period",t),o.toString()},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getTinkoffInstallmentLink=void 0;var t=Tt;Object.defineProperty(e,"getTinkoffInstallmentLink",{enumerable:!0,get:function(){return t.getTinkoffInstallmentLink}})}(kt);var jt={},Nt={};Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.getTinkoffPayLink=void 0;const xt=Ie;Nt.getTinkoffPayLink=function(e){const t=e.getPaymentMethod(xt.IntentPaymentMethod.TINKOFF_PAY);if(!t)throw new Error("No TPAY config in PaymentIntent");return t.link};var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.getTinkoffPayImage=void 0;const Ut=Ie;Lt.getTinkoffPayImage=function(e){const t=e.getPaymentMethod(Ut.IntentPaymentMethod.TINKOFF_PAY);if(!t)throw new Error("No TPAY config in PaymentIntent");return t.image},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getTinkoffPayImage=e.getTinkoffPayLink=void 0;var t=Nt;Object.defineProperty(e,"getTinkoffPayLink",{enumerable:!0,get:function(){return t.getTinkoffPayLink}});var n=Lt;Object.defineProperty(e,"getTinkoffPayImage",{enumerable:!0,get:function(){return n.getTinkoffPayImage}})}(jt);var Bt={},Gt={},Ft={},Yt={};Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.generateUuid=void 0,Yt.generateUuid=function(e=36){let t=(new Date).getTime(),n="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){let o=16*Math.random();return t>0?(o=(t+o)%16|0,t=Math.floor(t/16)):(o=(n+o)%16|0,n=Math.floor(n/16)),("x"===e?o:3&o|8).toString(16)})).slice(0,e)},Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.createYandexPaymentRequest=void 0;const Wt=Yt,Vt=Le;Ft.createYandexPaymentRequest=function(e){const t=e.getPaymentMethod(Vt.IntentPaymentMethod.YANDEX_PAY);if(!t)throw new Error("No YaPay config in PaymentIntent");if(!e.rawValue)throw new Error("No intent data");const n=e.rawValue.externalId||(0,Wt.generateUuid)();return{env:t.env,version:2,countryCode:window.YaPay.CountryCode.Ru,currencyCode:e.rawValue.currency,merchant:{id:t.merchantId,name:t.merchantName,url:e.rawValue.paymentUrl},order:{id:String(n),total:{amount:String(e.rawValue.amount)}},requiredFields:{billingContact:{email:!1}},paymentMethods:[{type:window.YaPay.PaymentMethodType.Card,gateway:t.gateway,gatewayMerchantId:e.rawValue.publicTerminalId,allowedAuthMethods:[window.YaPay.AllowedAuthMethod.PanOnly],allowedCardNetworks:Object.values(window.YaPay.AllowedCardNetwork)}]}},Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.createYandexPaySession=void 0;const Kt=Pe,Ht=Ze,qt=Ie,zt=_e,$t=Ft,Xt=Symbol("YaPaySessionInstanceKey");class Zt extends zt.PaymentInstanceBase{onBeforeIntentUpdate(e){this.instance.update(e.then((function(e){return{totalAmount:e.amount}})))}onIntentUpdated(){}onIntentStatusUpdated(){}ontIntentPayComplete(e,t){t===qt.IntentPaymentMethod.YANDEX_PAY&&this.instance.complete(e?window.YaPay.CompleteReason.Success:window.YaPay.CompleteReason.Error)}}Gt.createYandexPaySession=function(e){return Kt.__awaiter(this,void 0,void 0,(function*(){if(!e.getPaymentMethod(qt.IntentPaymentMethod.YANDEX_PAY))throw new Error("No YaPay config in PaymentIntent");if(window.YaPay||(yield(0,Ht.loadScript)("https://pay.yandex.ru/sdk/v1/pay.js")),e.hasPaymentInstance(Xt))return e.getPaymentInstance(Xt).getInstance();const t=(0,$t.createYandexPaymentRequest)(e),n=window.YaPay.createPayment(t),o=yield n;return e.addPaymentInstance(Xt,new Zt(o)),n}))};var Jt={};Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.getYandexPayButton=void 0,Jt.getYandexPayButton=function(e,t){return e.createButton({type:window.YaPay.ButtonType.Pay,theme:"white"===t?window.YaPay.ButtonTheme.White:window.YaPay.ButtonTheme.Black,width:window.YaPay.ButtonWidth.Auto})},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getYandexPayButton=e.createYandexPaySession=void 0;var t=Gt;Object.defineProperty(e,"createYandexPaySession",{enumerable:!0,get:function(){return t.createYandexPaySession}});var n=Jt;Object.defineProperty(e,"getYandexPayButton",{enumerable:!0,get:function(){return n.getYandexPayButton}})}(Bt);var Qt={},en={};Object.defineProperty(en,"__esModule",{value:!0}),en.getSberPayLinks=void 0;const tn=Pe,nn=Ie;en.getSberPayLinks=function(e){return tn.__awaiter(this,void 0,void 0,(function*(){const t=e.getPaymentMethod(nn.IntentPaymentMethod.SBER_PAY);if(!t)throw new Error(`No ${nn.IntentPaymentMethod.SBER_PAY} config in PaymentIntent`);if(!t.data)throw new Error(`Missing 'data'in ${nn.IntentPaymentMethod.SBER_PAY} payment config`);const n=yield fetch(t.data);if(!n.ok)throw new Error("Network response was not ok");const o=yield n.json();if(!o.redirectUrls)throw new Error("No RedirectUrls found in the response");return o.redirectUrls}))};var on={};Object.defineProperty(on,"__esModule",{value:!0}),on.getSberPayImage=void 0;const rn=Ie;on.getSberPayImage=function(e){const t=e.getPaymentMethod(rn.IntentPaymentMethod.SBER_PAY);if(!t)throw new Error("No SberPay config in PaymentIntent");return t.image},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getSberPayImage=e.getSberPayLinks=void 0;var t=en;Object.defineProperty(e,"getSberPayLinks",{enumerable:!0,get:function(){return t.getSberPayLinks}});var n=on;Object.defineProperty(e,"getSberPayImage",{enumerable:!0,get:function(){return n.getSberPayImage}})}(Qt);var an={},sn={};Object.defineProperty(sn,"__esModule",{value:!0}),sn.getInstallmentKzLink=void 0;const cn=Ie;sn.getInstallmentKzLink=function(e){const t=e.getPaymentMethod(cn.IntentPaymentMethod.INSTALLMENT_KZ);if(!t)throw new Error("No SOM config in PaymentIntent");return t.link},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getInstallmentKzLink=void 0;var t=sn;Object.defineProperty(e,"getInstallmentKzLink",{enumerable:!0,get:function(){return t.getInstallmentKzLink}})}(an),function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Pe;t.__exportStar(be,e),t.__exportStar(Ke,e),t.__exportStar(ze,e),t.__exportStar(lt,e),t.__exportStar(mt,e),t.__exportStar(It,e),t.__exportStar(Et,e),t.__exportStar(kt,e),t.__exportStar(jt,e),t.__exportStar(Bt,e),t.__exportStar(Qt,e),t.__exportStar(an,e)}(we),function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=Pe;t.__exportStar(we,e),t.__exportStar(Le,e)}(ve);var ln={widget:{baseUrl:"https://widget.cloudpayments.ru",isProd:"true"}},un=function(){return a((function e(t){r(this,e),s(this,"_currentValue",void 0),s(this,"_subscribers",[]),this._currentValue=t}),[{key:"value",set:function(e){this._currentValue=e,this.notifySubscribers()}},{key:"subscribe",value:function(e){var t=this;return this._subscribers.push(e),function(){d(this,t);var n=this._subscribers.indexOf(e);this._subscribers.splice(n,1)}.bind(this)}},{key:"next",value:function(e){this.value=e}},{key:"notifySubscribers",value:function(){var e=this;this._subscribers.forEach(function(t){d(this,e),t(this._currentValue)}.bind(this))}},{key:"clear",value:function(){this._subscribers.length=0}}])}(),dn=function(){return a((function e(){r(this,e),s(this,"viewPortId",function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36,n=(new Date).getTime(),o="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){d(this,e);var r=16*Math.random();return n>0?(r=(n+r)%16|0,n=Math.floor(n/16)):(r=(o+r)%16|0,o=Math.floor(o/16)),("x"===t?r:3&r|8).toString(16)}.bind(this)).slice(0,t)}()),s(this,"applePayPaymentResult",new un),s(this,"connection",null),s(this,"connectionResolvers",[]),s(this,"applePaySessions",new Map)}),[{key:"getConnection",value:function(){var e=this;return new Promise(function(t,n){var o=this;if(d(this,e),x.isIE()){var r=function(e){if(d(this,o),e.origin===ln.widget.baseUrl){try{"close"===JSON.parse(e.data).action&&this.hideWindow()}catch(e){return}window.removeEventListener("message",r)}}.bind(this);return window.addEventListener("message",r,!1),this.showWindow(),void n("IE")}null!=this.connection?t(this.connection):this.connectionResolvers.push(t)}.bind(this))}},{key:"showWindow",value:function(){var e,t,n=this;this.container&&(this.addViewPortMeta(),x.addClass(this.iframe,"with-appled"),e=document,(t=e.getElementById("payment-loading-overlay-63456123"))&&t.parentNode&&t.parentNode.removeChild(t),x.showHtmlElement(this.container),ye(this.container),this.alternateEmbed&&!this.appledStyle&&(this.savedScrollPosition=document.body.scrollTop,this.appledStyle=document.createElement("style"),this.appledStyle.type="text/css",this.appledStyle.innerHTML="\n                html {height: 100% !important; position: static !important}\n                body {margin: 0 !important; padding: 0 !important; position: static !important; height: 100vh !important; overscroll-behavior: none !important}\n                body * {display: none !important}\n                #".concat(this.container.id," {position: static !important}\n                #").concat(this.container.id,", #payments-backdrop-8978968765, iframe.with-appled {display: block !important}\n                .payment-tools-container.with-appled {display: table !important}\n                .payment-tools-container.with-appled div {display: table-cell !important}\n                .payment-tools-container.with-appled div *:not(style) {display: block !important}\n            "),document.body.appendChild(this.appledStyle),setTimeout(function(){d(this,n),window.scrollTo(0,0)}.bind(this),200)))}},{key:"hideWindow",value:function(){if(ge(this.container),this.savedScrollPosition&&(window.scrollTo(0,this.savedScrollPosition),this.savedScrollPosition=null),this.appledStyle){try{this.appledStyle.remove()}catch(e){}this.appledStyle=null}this.removeViewPortMeta(),this.iframe&&x.removeClass(this.iframe,"with-appled"),x.hideHtmlElement(this.container);try{this.container.remove()}catch(e){}this.onFrameDestroyed&&this.onFrameDestroyed(this.completedData)}},{key:"addViewPortMeta",value:function(){var e=document.getElementsByTagName("head")[0],t=document.createElement("meta");t.id=this.viewPortId,t.name="viewport",t.content="width=device-width, height=device-height, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no",e.appendChild(t)}},{key:"removeViewPortMeta",value:function(){var e=document.getElementById(this.viewPortId);e&&document.getElementsByTagName("head")[0].removeChild(e)}},{key:"getWindow",value:function(){var e;return null===(e=this.iframe.contentWindow)||void 0===e?void 0:e.window}},{key:"getApplePayHandlingMethods",value:function(){var e=this;return{setApplePaymentResult:this.setApplePayPaymentResult.bind(this),processApplePayment:this.processApplePaySessionAndPay.bind(this),isApplePayAvailiable:function(){return d(this,e),ve.isApplePayAvailable()}.bind(this),oncancel:this.oncancel.bind(this),addApplePaySession:this.addApplePaySession.bind(this),removeApplePaySession:this.removeApplePaySession.bind(this),getApplePaySession:this.getApplePaySession.bind(this),begin:this.begin.bind(this),completeMerchantValidation:this.completeMerchantValidation.bind(this),completePayment:this.completePayment.bind(this),onpaymentauthorized:this.onpaymentauthorized.bind(this),onvalidatemerchant:this.onvalidatemerchant.bind(this)}}},{key:"setApplePayPaymentResult",value:function(e){this.applePayPaymentResult.next(e)}},{key:"processApplePaySessionAndPay",value:(p=n(m().m((function e(t,n){var o,r=this;return m().w((function(e){for(;;)if(0===e.n)return o=new ApplePaySession(1,t),console.log("processApplePaySessionAndPay widget next with applePaySession:",o),e.a(2,new Promise(function(e,t){var n=this;d(this,r),o.oncancel=function(e){d(this,n),t(e)}.bind(this),o.onvalidatemerchant=function(e){d(this,n)}.bind(this),o.onpaymentauthorized=function(e){d(this,n)}.bind(this),o.begin()}.bind(this)))}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"oncancel",value:(u=n(m().m((function e(t){var n,o=this;return m().w((function(e){for(;;)switch(e.n){case 0:if(console.log("oncancel frame connector start"),!(n=this.applePaySessions.get(t))){e.n=1;break}return e.a(2,new Promise(function(e,t){var r=this;if(d(this,o),n.oncancel){var i=n.oncancel.bind(n);n.oncancel=function(t){d(this,r),console.log("oncancel frame connector in promise inner"),i(t),e({error:t.sessionError,type:t.type})}.bind(this)}else n.oncancel=function(t){d(this,r),console.log("oncancel frame connector in promise alone"),e({error:t.sessionError,type:t.type})}.bind(this)}.bind(this)));case 1:return console.log("oncancel frame connector end"),e.a(2,Promise.resolve())}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"addApplePaySession",value:(l=n(m().m((function e(t,n){var o;return m().w((function(e){for(;;)switch(e.n){case 0:console.log("addApplePaySession frame connector start",this.applePaySessions,"intent",n),o=T(n),console.log("applePaymentRequest",o),this.applePaySessions.set(t,new ApplePaySession(1,o)),console.log("addApplePaySession frame connector end",this.applePaySessions,this.applePaySessions.get(t));case 1:return e.a(2)}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"removeApplePaySession",value:function(e){this.applePaySessions.delete(e)}},{key:"getApplePaySession",value:function(e){return console.log("getApplePaySession frame connector start",this.applePaySessions,e,this.applePaySessions.has(e)),this.applePaySessions.get(e)}},{key:"begin",value:(c=n(m().m((function e(t){var n;return m().w((function(e){for(;;)if(0===e.n)return(n=this.applePaySessions.get(t))?(n.begin(),console.log("session with id ".concat(t," started begin"))):console.log("session with id ".concat(t," not found begin")),e.a(2,Promise.resolve())}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"completeMerchantValidation",value:(i=n(m().m((function e(t,n){var o;return m().w((function(e){for(;;)switch(e.n){case 0:if(o=this.applePaySessions.get(n),console.log("completeMerchantValidation frame connector start"),!o){e.n=1;break}return o.completeMerchantValidation(t),console.log("session with id ".concat(n," merchant validation completed completeMerchantValidation")),e.a(2,Promise.resolve(""));case 1:return console.log("session with id ".concat(n," not found completeMerchantValidation")),e.a(2,Promise.reject())}}),e,this)}))),function(e,t){return i.apply(this,arguments)})},{key:"completePayment",value:(o=n(m().m((function e(t,n){var o;return m().w((function(e){for(;;)if(0===e.n)return(o=this.applePaySessions.get(n))?(o.completePayment(t),console.log("session with id ".concat(n," payment completed completePayment"))):console.log("session with id ".concat(n," not found completePayment")),e.a(2,Promise.resolve())}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"onpaymentauthorized",value:(t=n(m().m((function e(t){var n,o,r=this;return m().w((function(e){for(;;)switch(e.n){case 0:if(console.log("onpaymentauthorized frame connector start"),n=this.applePaySessions.get(t),o=this.oncancel.bind(this),!n){e.n=1;break}return e.a(2,new Promise(function(e,i){var a=this;d(this,r),n.onpaymentauthorized=function(t){d(this,a),console.log("onpaymentauthorized frame connector in promise"),e(JSON.stringify(t.payment.token))}.bind(this),o(t).then(i)}.bind(this)));case 1:return console.log("onpaymentauthorized frame connector end"),e.a(2,Promise.resolve())}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"onvalidatemerchant",value:(e=n(m().m((function e(t){var n,o,r=this;return m().w((function(e){for(;;)switch(e.n){case 0:if(console.log("onvalidatemerchant frame connector start"),n=this.applePaySessions.get(t),o=this.oncancel.bind(this),!n){e.n=1;break}return e.a(2,new Promise(function(e,i){var a=this;d(this,r),n.onvalidatemerchant=function(t){d(this,a),console.log("onvalidatemerchant frame connector in promise"),e(t.validationURL)}.bind(this),o(t).then(i)}.bind(this)));case 1:return console.log("onvalidatemerchant frame connector end"),e.a(2,Promise.resolve())}}),e,this)}))),function(t){return e.apply(this,arguments)})}],[{key:"createContainer",value:function(e,t){var n=document.createElement("div");if(n.id="cp-scrollable-".concat(Math.floor(1e8*Math.random()).toString()),!e&&(n.style.cssText='z-index:99997;text-align:left;height:100%;width:100%;"position: fixed;"left:0;top:0;transition:opacity 0.15s;overflow:auto;-webkit-overflow-scrolling:touch;pointer-events:all;',t))for(var o in t)n.style.setProperty(o,t[o]);return n.style.pointerEvents="all",n}},{key:"ensureContainer",value:function(e){if(null==e)return document.body;if("string"==typeof e){var t=document.getElementById(e);return null==t?(console.warn("Specified container with id ".concat(e," not found. document.body will used instead")),document.body):t}if("object"===P(e)&&1===e.nodeType)return e;throw new Error("Argument 'container' must be an ID of element or the element itself")}}]);var e,t,o,i,c,l,u,p}(),pn=function(e){function t(e,n,i,a){var s,c=this;if(r(this,t),s=o(this,t),x.isIE()){s.iframe=document.createElement("iframe");var l=new URL("".concat(ln.widget.baseUrl,"/next/app/widget"));return s.iframe.src=l.toString(),s.iframe.style.cssText="height: 100% !important;width: 100% !important;position: fixed !important;z-index: 999999 !important;border: 0 !important; top: 0 !important;bottom: 0 !important;left: 0 !important;right: 0px !important;max-height: 100% !important;",s.container=t.createContainer(s.alternateEmbed),s.container.appendChild(s.iframe),t.ensureContainer(n).appendChild(s.container),s.hideWindow(),h(s)}s.alternateEmbed=e,s.iframe=document.createElement("iframe");var u=new URL("".concat(ln.widget.baseUrl,"/next/app/widget"));i&&u.searchParams.append("locale",i),a&&u.searchParams.append("debug","true"),s.iframe.src=u.toString(),s.iframe.allowPaymentRequest=!0,s.iframe.setAttribute("allow","payment"),s.iframe.style.cssText="height: 100% !important;width: 100% !important;position: fixed !important;z-index: 99999 !important;border: 0 !important; top: 0 !important; top: env(safe-area-inset-top, 0) !important;bottom: 0 !important;left: 0 !important;right: 0px !important;max-height: 100% !important;",s.container=t.createContainer(s.alternateEmbed),s.container.appendChild(s.iframe),s.hideWindow(),t.ensureContainer(n).appendChild(s.container);var p=f(f({},s.getApplePayHandlingMethods()),{},{externalHref:function(){return d(this,c),window.location.href}.bind(this),showWindow:s.showWindow.bind(s),hideWindow:s.hideWindow.bind(s),on3ds:function(){throw d(this,c),new Error("Not implemented")}.bind(this),onFrameResize:function(){throw d(this,c),new Error("Not implemented")}.bind(this),onCryptogram:function(e){d(this,c),s.onCryptogram&&s.onCryptogram(e),s.hideWindow()}.bind(this),completeWidgetCallback:function(e,t){var n,o;if(d(this,c),s.onPaymentCompleted){var r,i=f({},e);if(null!=e&&null!==(r=e.data)&&void 0!==r&&r.Model){var a,l,u=null==i||null===(a=i.data)||void 0===a||null===(a=a.Model)||void 0===a?void 0:a.TransactionId,p=null==i||null===(l=i.data)||void 0===l||null===(l=l.Model)||void 0===l?void 0:l.ReasonCode;i.data={email:t},u&&(i.data.transactionId=u),p&&(i.data.ReasonCode=p)}e.type===re.Installment&&delete i.data,s.onPaymentCompleted(i)}var h={success:(null==e?void 0:e.status)===ie.Success,message:(null==e||null===(n=e.data)||void 0===n?void 0:n.Message)||null,code:(null==e||null===(o=e.data)||void 0===o||null===(o=o.Model)||void 0===o?void 0:o.ReasonCode)||0,email:t};s.completedData=h,e&&s.onComplete&&s.onComplete(h)}.bind(this),openLink:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=null;n&&((o=document.createElement("meta")).name="referrer",o.content="no-referrer",document.head.appendChild(o)),window.location.href=e,n&&o&&setTimeout(function(){d(this,t),document.head.removeChild(o)}.bind(this),1e3)}});return s.connectionHandler=oe({iframe:s.iframe,methods:p}),s.connectionHandler.promise.then(function(e){var t=this;d(this,c),s.connection=e,s.connectionResolvers.forEach(function(n){return d(this,t),n(e)}.bind(this))}.bind(this)),s}return l(t,e),a(t)}(dn);function fn(e){return{type:re.Error,data:e}}var hn=function(){return a((function e(){r(this,e),s(this,"legacyCallbackObject",{shouldInvokeOnCompleteInstantly:!1}),s(this,"lastCallbackResult",this.lastCallbackResultDefault),s(this,"callbackObject",{}),s(this,"onCloseWidgetResolver",null)}),[{key:"lastCallbackResultDefault",get:function(){return{type:re.Cancel}}},{key:"onclose",get:function(){return this.callbackObject.onClose},set:function(e){if(e&&"function"!=typeof e)throw new Error("Function required");this.callbackObject.onClose=e}},{key:"oncomplete",get:function(){return this.callbackObject.onPaymentCompleted},set:function(e){if(e&&"function"!=typeof e)throw new Error("Function required");this.callbackObject.onPaymentCompleted=e}},{key:"oncryptogram",get:function(){return this.callbackObject.onCryptogramCreated},set:function(e){if(e&&"function"!=typeof e)throw new Error("Function required");this.callbackObject.onCryptogramCreated=e}},{key:"invokeCallbacks",value:function(e,t,n){var o,r,i;t?(t.success&&this.legacyCallbackObject.onSuccess&&("function"==typeof this.legacyCallbackObject.onSuccess?this.legacyCallbackObject.onSuccess(e):window.location.replace(this.legacyCallbackObject.onSuccess)),!t.success&&this.legacyCallbackObject.onFail&&("function"==typeof this.legacyCallbackObject.onFail?this.legacyCallbackObject.onFail(t.message,e,null===(o=t.code)||void 0===o?void 0:o.toString()):window.location.replace(this.legacyCallbackObject.onFail))):n||this.legacyCallbackObject.onFail&&("function"==typeof this.legacyCallbackObject.onFail?this.legacyCallbackObject.onFail("User has cancelled",e,void 0):window.location.replace(this.legacyCallbackObject.onFail));!this.legacyCallbackObject.shouldInvokeOnCompleteInstantly&&this.legacyCallbackObject.onComplete&&this.legacyCallbackObject.onComplete({success:null!==(r=null==t?void 0:t.success)&&void 0!==r&&r,message:null==t?void 0:t.message,code:null==t?void 0:t.code},e);(n&&this.legacyCallbackObject.onSuccess&&"function"==typeof this.legacyCallbackObject.onSuccess&&this.legacyCallbackObject.onSuccess(e,null==n?void 0:n.cryptogram,null==n?void 0:n.email),this.onCloseWidgetResolver&&this.lastCallbackResult)?null!==(i=this.lastCallbackResult)&&void 0!==i&&i.status&&[ie.Success,ie.Appointment].includes(this.lastCallbackResult.status)&&![re.Error,re.Cancel].includes(this.lastCallbackResult.type)?this.onCloseWidgetResolver(this.lastCallbackResult):!this.lastCallbackResult||this.lastCallbackResult.type!==re.Error&&this.lastCallbackResult.status!==ie.Fail?this.onCloseWidgetResolver({type:re.Cancel}):this.onCloseWidgetResolver(f(f({},this.lastCallbackResult),{},{type:re.Error})):this.onclose&&this.lastCallbackResult&&this.onclose(f(f({},this.lastCallbackResult),{},{type:re.Cancel}))}}])}(),mn=function(){return a((function e(){r(this,e)}),null,[{key:"validate",value:function(e,t,n){var o,r=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e)throw new Error("IntentOptions must be specified");if(!e.publicTerminalId&&!i)throw new Error("Option 'publicTerminalId' must be specified");if(!e.amount&&!i)throw new Error("Option 'amount' must be specified");if(e.amount&&"number"!=typeof e.amount)throw new Error("Option 'amount' must be a number");if(!e.currency&&!i)throw new Error("Option 'currency' must be specified");if(e.receiptEmail&&"string"!=typeof e.receiptEmail)throw new Error("Option 'receiptEmail' must be a string");if(n&&"function"!=typeof n)throw new Error("Argument 'onCompleted' must be a function");if(e.emailBehavior&&!Object.values(R).some(function(t){return d(this,r),e.emailBehavior===t}.bind(this)))throw new Error("Option 'emailBehavior' must be a one of the following values: ".concat(Object.values(R).join(", ")));if(!e.receiptEmail&&null!=t&&t.email&&(e.receiptEmail=t.email),e.successRedirectUrl&&"string"!=typeof e.successRedirectUrl)throw new Error("Argument 'successRedirectUrl' must be a string");if(e.failRedirectUrl&&"string"!=typeof e.failRedirectUrl)throw new Error("Argument 'failRedirectUrl' must be a string");if((e.paymentMethodsNotfoldedCount||0===e.paymentMethodsNotfoldedCount)&&(!Number.isInteger(e.paymentMethodsNotfoldedCount)||0===e.paymentMethodsNotfoldedCount))throw new Error("Option 'paymentMethodsNotfoldedCount' must be a integer");if(null!==(o=e.paymentMethodSequence)&&void 0!==o&&o.length){if(!Array.isArray(e.paymentMethodSequence))throw new Error("Option 'paymentMethodSequence' must be an array");e.paymentMethodSequence.forEach(function(e){if(d(this,r),"string"!=typeof e&&"number"!=typeof e)throw new Error("Option 'paymentMethodSequence' include not valid element")}.bind(this))}if(e.escrow){if(!i&&"RUB"!==e.currency||i&&e.currency&&"RUB"!==e.currency)throw new Error("Option 'escrow' is not allowed with currency other than 'RUB'");if(null==e.escrow.accumulationId&&null==e.escrow.startAccumulation)throw new Error("Option 'escrow.accumulationId' or 'escrow.startAccumulation' are required with escrow");if(e.escrow.accumulationId&&!0===e.escrow.startAccumulation)throw new Error("Only 'escrow.accumulationId' or 'escrow.startAccumulation' allowed at same time");if(null!=e.escrow.accumulationId&&"string"!=typeof e.escrow.accumulationId)throw new Error("Option 'escrow.accumulationId' must be a string");if(null!=e.escrow.startAccumulation&&"boolean"!=typeof e.escrow.startAccumulation)throw new Error("Option 'escrow.accumulationId' must be a boolean")}}}])}(),yn=function(){return a((function e(){r(this,e)}),null,[{key:"validate",value:function(e,t,n){var o=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e)throw new Error("PaymentOptions must be specified");if(!e.publicId&&!r)throw new Error("Option 'publicId' must be specified");if(!e.amount&&!r)throw new Error("Option 'amount' must be specified");if(e.amount&&"number"!=typeof e.amount)throw new Error("Option 'amount' must be a number");if(!e.currency&&!r)throw new Error("Option 'currency' must be specified");if(e.email&&"string"!=typeof e.email)throw new Error("Option 'email' must be a string");if(n&&"function"!=typeof n)throw new Error("Option 'onCompleted' must be a function");var i=!!e.requireEmail,a=!!e.disableEmail,s=!!e.emailBehavior;if(s&&(i||a))throw new Error("Option 'emailBehavior' can't be defined with options 'requireEmail' or 'disableEmail' simultaneously");if(s&&!Object.values(R).some(function(t){return d(this,o),e.emailBehavior===t}.bind(this)))throw new Error("Option 'emailBehavior' must be a one of the following values: ".concat(Object.values(R).join(", ")));if(i&&"boolean"!=typeof e.requireEmail)throw new Error("Option 'requireEmail' must be a boolean");if(a&&"boolean"!=typeof e.disableEmail)throw new Error("Option 'disableEmail' must be a boolean");if(!e.email&&null!=t&&t.email&&(e.email=t.email),e.configuration){var c;if(e.configuration.installment&&"object"!==P(e.configuration.installment))throw new Error("Option 'configuration.installment' must be a object");if(e.configuration.installment&&e.configuration.installment.promoCode&&"string"!=typeof e.configuration.installment.promoCode)throw new Error("Option 'configuration.installment.promoCode' must be a string");if(e.configuration.common&&e.configuration.common.successRedirectUrl&&"string"!=typeof e.configuration.common.successRedirectUrl)throw new Error("Option 'configuration.common.successRedirectUrl' must be a string");if(e.configuration.common&&e.configuration.common.failRedirectUrl&&"string"!=typeof e.configuration.common.failRedirectUrl)throw new Error("Option 'configuration.common.failRedirectUrl' must be a string");if((e.configuration.paymentMethodsNotfoldedCount||0===e.configuration.paymentMethodsNotfoldedCount)&&(!Number.isInteger(e.configuration.paymentMethodsNotfoldedCount)||0===e.configuration.paymentMethodsNotfoldedCount))throw new Error("Option 'paymentMethodsNotfoldedCount' must be a integer");if(null!==(c=e.configuration.paymentMethodsOrder)&&void 0!==c&&c.length){if(!Array.isArray(e.configuration.paymentMethodsOrder))throw new Error("Option 'paymentMethodsOrder' must be an array");e.configuration.paymentMethodsOrder.forEach(function(e){if(d(this,o),!Number.isInteger(e)&&"string"!=typeof e)throw new Error("Option 'paymentMethodsOrder' include not valid element")}.bind(this))}}if(e.escrow){if(!r&&"RUB"!==e.currency||r&&e.currency&&"RUB"!==e.currency)throw new Error("Option 'escrow' is not allowed with currency other than 'RUB'");if(null==e.escrow.accumulationId&&null==e.escrow.startAccumulation)throw new Error("Option 'escrow.accumulationId' or 'escrow.startAccumulation' are required with escrow");if(e.escrow.accumulationId&&!0===e.escrow.startAccumulation)throw new Error("Only 'escrow.accumulationId' or 'escrow.startAccumulation' allowed at same time");if(null!=e.escrow.accumulationId&&"string"!=typeof e.escrow.accumulationId)throw new Error("Option 'escrow.accumulationId' must be a string");if(null!=e.escrow.startAccumulation&&"boolean"!=typeof e.escrow.startAccumulation)throw new Error("Option 'escrow.accumulationId' must be a boolean")}}}])}(),gn=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,t),s(e=o(this,t),"alternateEmbed",!1),s(e,"deviceDetector",new N),s(e,"frameDestroyed",!1),e.options=e.setWidgetOptionsDefaults(n),n.debug,e.alternateEmbed=e.deviceDetector.isIOs||e.deviceDetector.isAndroid,e.containerManager=e.createFrameConnector(),e}return l(t,e),a(t,[{key:"pay",value:function(e,t,n){var o=this;return this.legacyCallbackObject.onSuccess=null==n?void 0:n.onSuccess,this.legacyCallbackObject.onFail=null==n?void 0:n.onFail,this.legacyCallbackObject.onComplete=null==n?void 0:n.onComplete,new Promise(function(n){d(this,o),this.onCloseWidgetResolver=n,this.startPayment(e,t,!0)}.bind(this))}},{key:"charge",value:function(e,t,n,o){e.auth=!1,this.legacyCallbackObject.onSuccess=t,this.legacyCallbackObject.onFail=n,this.legacyCallbackObject.onComplete=o,this.startPayment(U.Charge,e,!1)}},{key:"auth",value:function(e,t,n,o){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(r&&"boolean"!=typeof r)throw new Error("Argument 'auth' must be a boolean");e.auth=!0,this.legacyCallbackObject.onSuccess=t,this.legacyCallbackObject.onFail=n,this.legacyCallbackObject.onComplete=o,this.startPayment(U.Auth,e,!1)}},{key:"start",value:function(e,t){var n=this;return this.legacyCallbackObject.onSuccess=null==t?void 0:t.onSuccess,this.legacyCallbackObject.onFail=null==t?void 0:t.onFail,this.legacyCallbackObject.onComplete=null==t?void 0:t.onComplete,new Promise(function(t){d(this,n),this.onCloseWidgetResolver=t,this.startIntentPayment(e,!0)}.bind(this))}},{key:"close",value:function(){this.containerManager&&(this.containerManager.hideWindow(),this.containerManager=void 0)}},{key:"startPayment",value:function(e,t){var n=this,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.paymentOptions)throw new Error("Payment options already set. Prevented multiply widget windows.");if(e!==U.Auth&&e!==U.Charge)throw new Error("Option 'type' must be 'auth' or 'charge'");try{this.validateOptions(t)}catch(e){var r=this.onCloseWidgetResolver&&(null==e?void 0:e.message);if(this.logValidationError(t,e,!r),r)return this.lastCallbackResult=fn(e.message),void this.invokeCallbacks(this.merchantPaymentOptions)}var i=new G(t,e,this.options.cryptogramMode);L(document),this.paymentOptions=i,this.merchantPaymentOptions=t,this.legacyCallbackObject.shouldInvokeOnCompleteInstantly=o,this.frameDestroyed&&(this.containerManager=this.createFrameConnector()),this.containerManager.getConnection().then(function(e){d(this,n),e.setWidgetOptions(this.paymentOptions,{origin:this.getOrigin.call(this)},this.options)}.bind(this)).catch(function(){d(this,n),console.warn("IE Detected. Payment prevented.")}.bind(this)),history.pushState({paymentOptions:t,options:this.options},"PaymentWidget",window.location.href)}},{key:"startIntentPayment",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.intentOptions||this.paymentOptions)throw new Error("Payment intent options already set. Prevented multiply widget windows.");if(!e.paymentSchema||![M.DUAL,M.SINGLE].includes(e.paymentSchema))throw new Error("Option 'paymentSchema' must be 'Single' or 'Dual'");try{this.validateIntentOptions(e)}catch(t){var o=this.onCloseWidgetResolver&&(null==t?void 0:t.message);if(this.logValidationError(e,t,!o),o)return this.lastCallbackResult=fn(t.message),void this.invokeCallbacks(this.merchantPaymentOptions)}L(document),this.intentOptions=e,this.legacyCallbackObject.shouldInvokeOnCompleteInstantly=n,this.frameDestroyed&&(this.containerManager=this.createFrameConnector()),this.containerManager.getConnection().then(function(e){d(this,t),e.setWidgetOptions(this.paymentOptions,{origin:this.getOrigin.call(this)},this.options,this.intentOptions)}.bind(this)).catch(function(){d(this,t),console.warn("IE Detected. Payment prevented.")}.bind(this)),history.pushState({intentOptions:e,options:this.options},"PaymentWidget",window.location.href)}},{key:"setWidgetOptionsDefaults",value:function(e){var t=f({},e);if(x.isNullOrUndefined(t.showLoadingImage)&&(t.showLoadingImage=!0),x.isNullOrUndefined(t.applePaySupport)&&(t.applePaySupport=!0),x.isNullOrUndefined(t.googlePaySupport)&&(t.googlePaySupport=!0),x.isNullOrUndefined(t.installmentKzSupport)&&(t.installmentKzSupport=!0),x.isNullOrUndefined(t.tinkoffInstallmentSupport)&&(t.tinkoffInstallmentSupport=!0),x.isNullOrUndefined(t.tinkoffPaySupport)&&(t.tinkoffPaySupport=!0),x.isNullOrUndefined(t.speiSupport)&&(t.speiSupport=!0),x.isNullOrUndefined(t.yandexPaySupport)&&(t.yandexPaySupport=!0),x.isNullOrUndefined(t.sbpSupport)&&(t.sbpSupport=!0),x.isNullOrUndefined(t.mirPaySupport)&&(t.mirPaySupport=!0),x.isNullOrUndefined(t.foreignSupport)&&(t.foreignSupport=!0),x.isNullOrUndefined(t.sberPaySupport)&&(t.sberPaySupport=!0),x.isNullOrUndefined(t.masterPassSupport)&&(t.masterPassSupport=!0),x.isNullOrUndefined(t.cryptogramMode)&&(t.cryptogramMode=!1),!x.isNullOrUndefined(t.logoUrl))try{if(function(e){if(e.startsWith("data:image/"))return!1;try{return Boolean(new URL(e))}catch(e){return!1}}(t.logoUrl)){var n=new URL(t.logoUrl);t.logoUrl=-1!==n.href.indexOf("static.cloudpayments.ru")||-1!==n.href.indexOf("static-preprod.cloudpayments.ru")||-1!==n.href.indexOf("static-stage.cloudpayments.ru")?n.href:void 0}else if(!function(e){if(e.startsWith("data:image/")){var t="data:image/jpeg;base64",n="data:image/png;base64";return e.startsWith(t)?"/"===e[23]:!!e.startsWith(n)&&"i"===e[22]}return!1}(t.logoUrl))throw new Error("Logo is not an url and not valid base64 image")}catch(e){t.logoUrl=void 0}return t}},{key:"createFrameConnector",value:function(){var e=this,t=new pn(this.alternateEmbed,this.options.container,this.options.language,this.options.debug);return t.onFrameDestroyed=function(t,n){d(this,e);try{this.invokeCallbacks(this.merchantPaymentOptions,t,n)}catch(e){}this.paymentOptions=void 0,this.intentOptions=void 0,this.merchantPaymentOptions=void 0,this.frameDestroyed=!0,this.lastCallbackResult=this.lastCallbackResultDefault}.bind(this),t.onComplete=function(t){d(this,e),this.legacyCallbackObject.onComplete&&this.legacyCallbackObject.shouldInvokeOnCompleteInstantly&&this.legacyCallbackObject.onComplete(t,this.merchantPaymentOptions)}.bind(this),t.onPaymentCompleted=function(t){d(this,e),this.lastCallbackResult=t,t.type!==re.Cryptogram&&this.oncomplete&&this.oncomplete(t)}.bind(this),t.onCryptogram=function(t){d(this,e),this.lastCallbackResult=t,this.onCloseWidgetResolver&&this.onCloseWidgetResolver(t)}.bind(this),this.frameDestroyed=!1,t}},{key:"validateOptions",value:function(e,t){return yn.validate(e,this.options,t)}},{key:"validateIntentOptions",value:function(e,t){return mn.validate(e,this.options,t)}},{key:"logValidationError",value:function(e,t,n){var o,r=this;null===(o=this.containerManager)||void 0===o||null===(o=o.getConnection())||void 0===o||null===(o=o.then(function(o){d(this,r);var i={publicId:null==e?void 0:e.publicId,publicTerminalId:null==e?void 0:e.publicTerminalId,amount:null==e?void 0:e.amount,currency:null==e?void 0:e.currency,description:null==e?void 0:e.description,emailBehavior:null==e?void 0:e.emailBehavior,requireEmail:null==e?void 0:e.requireEmail,cryptogramMode:null==e?void 0:e.cryptogramMode,retryPayment:null==e?void 0:e.retryPayment,accountId:null==e?void 0:e.accountId,invoiceId:null==e?void 0:e.invoiceId,paymentUrl:this.getOrigin()};o.logValidationError(i,(null==t?void 0:t.message)||"",n)}.bind(this)))||void 0===o||o.catch(function(){d(this,r),console.warn("IE Detected. logValidationError prevented.")}.bind(this))}},{key:"getOrigin",value:function(){return"null"!==window.location.origin||window===window.parent?window.location.origin:document.referrer}}])}(hn),vn=gn,Pn=gn,wn={event:{status:{success:ie.Success,fail:ie.Fail,appointment:ie.Appointment},type:{payment:re.Payment,installment:re.Installment,error:re.Error,cancel:re.Cancel}},escrow:{NToOne:B.NToOne,OneToN:B.OneToN},ExternalPaymentMethods:{ApplePay:0,GooglePay:1,MasterPass:2,YandexPay:3,TinkoffInstallmentPay:4,SbpPay:5,TinkoffPay:6,MirPay:7,Spei:8,TcsBnplDolyame:9,MtsPay:10,ForeignCard:11,Som:11,SberPay:12,TinkoffCredit:13,InstallmentKz:17,Card:99}};e.CloudPayments=vn,e.Widget=Pn,e.constant=wn,Object.defineProperty(e,"__esModule",{value:!0})}(this.cp=this.cp||{});
